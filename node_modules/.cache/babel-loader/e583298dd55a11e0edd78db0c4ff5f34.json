{"ast":null,"code":"var _jsxFileName = \"/Users/michelleponting/Desktop/hearingtest/webpage/src/components/hearingtest/hearingscreening/screening_routes/Audio.js\";\nimport React, { Component } from 'react';\nimport { UncontrolledPopover, PopoverBody } from 'reactstrap';\nimport { BoopButton } from './TonePlayback';\nimport { TEST } from './TestConstant'; // cp\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Audio extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isTestFinished: false,\n      disableYesNo: false,\n      // debug set false\n      isButtonDisabled: false,\n      test: [],\n      currentEarID: 0,\n      // 0=R starting\n      currentHzID: 0,\n      // 0=1000 starting \n      // (do not need to track dbID since changes based on the yes or no)\n      activeEar: 'R',\n      activeHertz: 1000,\n      activeDecible: 30\n    };\n\n    this.handleDisableBtnUntilTone = () => {\n      this.setState({\n        disableYesNo: false\n      });\n    };\n\n    this.handleDisableBtnWithAudio = () => {\n      this.setState({// isButtonDisabled: true\n      }); // **** here's the timeout ****\n\n      setTimeout(() => this.setState({\n        isButtonDisabled: false\n      }), 3500);\n    };\n\n    this.getDecibleID = db => {\n      let id = (db - 15) / 5;\n      return id;\n    };\n\n    this.handleDrop = () => {\n      let earID = this.state.currentEarID;\n      let hzID = this.state.currentHzID;\n      let db = this.state.activeDecible;\n      let dbID = this.getDecibleID(db); // test object copy\n\n      let test = [...this.state.test]; // check if first time hz has played\n      // !yes = update ableToHear for hz level to true\n\n      if (!test[earID].hertz[hzID].ableToHear) {\n        test[earID].hertz[hzID].ableToHear = true;\n      } // check if this db has played before for this hz\n      // !yes = set hasPlayed for decible level to true\n\n\n      if (!test[earID].hertz[hzID].decibles[dbID].hasPlayed) {\n        test[earID].hertz[hzID].decibles[dbID].hasPlayed = true;\n      } // overall things to update\n      // current db numHeard +1\n\n\n      test[earID].hertz[hzID].decibles[dbID].numHeard += 1; // check numHeard + numMissed to tell if repeat or move on\n\n      let numHeard = test[earID].hertz[hzID].decibles[dbID].numHeard;\n      let numMissed = test[earID].hertz[hzID].decibles[dbID].numMissed;\n      let totalPlayed = numHeard + numMissed;\n      let hitRate = Number((numHeard / totalPlayed).toFixed(2)); // if at lowest dB then jump to the next hz\n\n      if (totalPlayed >= 2 && hitRate > .65) {\n        test[earID].hertz[hzID].minThres = db; // set min thres before moving on\n\n        if (earID === 1 && test[earID].hertz[hzID].hzLevel === 500) {\n          this.setState({\n            isTestFinished: true\n          });\n        } else {\n          if (test[earID].hertz[hzID].hzLevel !== 500) {\n            // change hz\n            hzID += 1;\n            db = 30;\n          } else if (test[earID].hertz[hzID].hzLevel === 500) {\n            // change ears\n            earID = 1;\n            hzID = 0;\n            db = 30;\n          }\n        }\n      } else if (db === 20) {\n        // edge case\n        db -= 5;\n      } else if (db - 10 >= 15) {\n        // drop case\n        db -= 10;\n      }\n\n      this.setState({\n        test: test,\n        currentEarID: earID,\n        currentHzID: hzID,\n        activeEar: this.state.test[earID].ear,\n        activeHertz: this.state.test[earID].hertz[hzID].hzLevel,\n        activeDecible: db // disableYesNo: true\n\n      });\n    };\n\n    this.handleIncrease = () => {\n      let earID = this.state.currentEarID;\n      let hzID = this.state.currentHzID;\n      let db = this.state.activeDecible;\n      let dbID = this.getDecibleID(db); // test object copy\n\n      let test = [...this.state.test]; // overall things to update\n      // current db numMissed +1\n\n      test[earID].hertz[hzID].decibles[dbID].numMissed += 1; // check first time hz played and unable to hear\n      // !hear = update numOnlyNo \n\n      if (!test[earID].hertz[hzID].ableToHear && db < 70) {\n        test[earID].hertz[hzID].numOnlyNo += 1;\n        db += 10;\n      } else if (db === 75) {\n        if (test[earID].hertz[hzID].hzLevel !== 500) {\n          // next hz\n          db = 30;\n          hzID += 1;\n        } else if (earID === 1 && test[earID].hertz[hzID].hzLevel === 500) {\n          // end test\n          this.setState({\n            isTestFinished: true\n          });\n        } else {\n          // switch ears\n          earID = 1;\n          hzID = 0;\n          db = 30;\n        }\n      } else {\n        db += 5;\n      }\n\n      this.setState({\n        test: test,\n        currentEarID: earID,\n        currentHzID: hzID,\n        activeEar: this.state.test[earID].ear,\n        activeHertz: this.state.test[earID].hertz[hzID].hzLevel,\n        activeDecible: db // disableYesNo: true\n\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      test: TEST,\n      disableYesNo: true\n    });\n  }\n\n  render() {\n    if (this.state.isTestFinished) {\n      return /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jumbotron bg-transparent\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Hearing Screening Complete!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Something about aknowledging this is a screening blah blah blah\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-check\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-check-input\",\n              type: \"checkbox\",\n              value: \"\",\n              id: \"soundSet50\",\n              onClick: () => {\n                this.props.disable();\n                this.props.passResults(this.state.test);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 22\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-check-label\",\n              htmlFor: \"soundSet50\",\n              children: \"I confirm above statement\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 22\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 13\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"main\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container text-center d-flex flex-column\",\n          children: [/*#__PURE__*/_jsxDEV(ToneDisplay, {\n            currentEar: this.state.activeEar // passing current ear\n            ,\n            currentHZ: this.state.activeHertz // passing current hz\n            ,\n            currentDB: this.state.activeDecible // passing current db\n            ,\n            timeOut: this.handleDisableBtnWithAudio,\n            isButtonDisabled: this.state.isButtonDisabled,\n            checkClick: this.handleDisableBtnUntilTone\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-weight-light py-2 m-0\",\n            children: \"Do you hear this tone?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(AudioResponse, {\n            drop10: this.handleDrop // passing drop function\n            ,\n            increase5: this.handleIncrease // passing increase function\n            ,\n            isButtonDisabled: this.state.isButtonDisabled,\n            hasTonePlayed: this.state.disableYesNo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(WhatToDo, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 13\n      }, this);\n    }\n  }\n\n}\n\nclass ToneDisplay extends Component {\n  render() {\n    // using the passed hz/db to concat different parts together for file path name\n    let ear = this.props.currentEar;\n    let hz = this.props.currentHZ;\n    let db = this.props.currentDB;\n    let boop = \"play\" + ear + hz + \"Hz\" + db;\n    let title = \"Right Ear - \";\n\n    if (ear === 'L') {\n      title = \"Left Ear - \";\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: title + hz + \"Hz\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(BoopButton, {\n          boop: boop,\n          clickDisable: this.props.timeOut,\n          disabled: this.props.isButtonDisabled,\n          hasClicked: this.props.checkClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 16\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 10\n    }, this);\n  }\n\n}\n\nclass AudioResponse extends Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-inline-flex justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row py-2 mb-4 m-2 align-items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-dark text-nowrap screening-btn-hear\",\n            disabled: this.props.isButtonDisabled || this.props.hasTonePlayed,\n            onClick: this.props.increase5,\n            children: /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-weight-light py-2 m-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-hand-thumbs-down text-black\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 65\n              }, this), \" No\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 22\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-info text-nowrap screening-btn-hear\",\n            disabled: this.props.isButtonDisabled || this.props.hasTonePlayed,\n            onClick: this.props.drop10,\n            children: /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-weight-light py-2 m-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-hand-thumbs-up text-black\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 65\n              }, this), \" Yes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 22\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 10\n    }, this);\n  }\n\n}\n\nfunction WhatToDo() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"px-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-transparent\",\n      type: \"link\",\n      id: \"informationPopover\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mb-0 font-weight-light\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-info-circle text-info\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 54\n        }, this), \" What do I do?\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(UncontrolledPopover, {\n      placement: \"bottom\",\n      target: \"informationPopover\",\n      children: /*#__PURE__*/_jsxDEV(PopoverBody, {\n        className: \"font-weight-light shadow text-center\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"m-0 p-0\",\n          children: \"Click the play button to listen to the tone, \\u201CNo\\u201D if you did not hear the sound and \\u201CYes\\u201D if you did. If you want to stop your hearing screening and go back to the instructions, click the \\u201Crestart\\u201D button. \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 276,\n    columnNumber: 10\n  }, this);\n}\n\n_c = WhatToDo;\nexport default Audio;\n\nvar _c;\n\n$RefreshReg$(_c, \"WhatToDo\");","map":{"version":3,"sources":["/Users/michelleponting/Desktop/hearingtest/webpage/src/components/hearingtest/hearingscreening/screening_routes/Audio.js"],"names":["React","Component","UncontrolledPopover","PopoverBody","BoopButton","TEST","Audio","state","isTestFinished","disableYesNo","isButtonDisabled","test","currentEarID","currentHzID","activeEar","activeHertz","activeDecible","handleDisableBtnUntilTone","setState","handleDisableBtnWithAudio","setTimeout","getDecibleID","db","id","handleDrop","earID","hzID","dbID","hertz","ableToHear","decibles","hasPlayed","numHeard","numMissed","totalPlayed","hitRate","Number","toFixed","minThres","hzLevel","ear","handleIncrease","numOnlyNo","componentDidMount","render","props","disable","passResults","ToneDisplay","currentEar","hz","currentHZ","currentDB","boop","title","timeOut","checkClick","AudioResponse","hasTonePlayed","increase5","drop10","WhatToDo"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { UncontrolledPopover, PopoverBody } from 'reactstrap';\n\nimport { BoopButton } from './TonePlayback';\nimport { TEST } from './TestConstant';\n\n// cp\nclass Audio extends Component {\n   state = {\n      isTestFinished: false,\n      disableYesNo: false, // debug set false\n      isButtonDisabled: false,\n      test: [],\n\n      currentEarID: 0, // 0=R starting\n      currentHzID: 0, // 0=1000 starting \n      // (do not need to track dbID since changes based on the yes or no)\n\n      activeEar: 'R',\n      activeHertz: 1000,\n      activeDecible: 30\n   }\n\n   componentDidMount() {\n      this.setState({\n         test: TEST,\n         disableYesNo: true\n      });\n   }\n\n   handleDisableBtnUntilTone = () => {\n      this.setState({\n         disableYesNo: false\n      });\n   }\n\n   handleDisableBtnWithAudio = () => {\n      this.setState({\n         // isButtonDisabled: true\n      });\n\n      // **** here's the timeout ****\n      setTimeout(() => this.setState({ isButtonDisabled: false }), 3500);\n   }\n\n   // use activeDecible to then pass to this function to get array id\n   getDecibleID = (db) => {\n      let id = (db - 15) / 5;\n      return id;\n   }\n\n   // when you click yes\n   handleDrop = () => {\n      let earID = this.state.currentEarID;\n      let hzID = this.state.currentHzID;\n      let db = this.state.activeDecible;\n      let dbID = this.getDecibleID(db);\n\n      // test object copy\n      let test = [...this.state.test];\n\n      // check if first time hz has played\n      // !yes = update ableToHear for hz level to true\n      if (!test[earID].hertz[hzID].ableToHear) {\n         test[earID].hertz[hzID].ableToHear = true;\n      }\n\n      // check if this db has played before for this hz\n      // !yes = set hasPlayed for decible level to true\n      if (!test[earID].hertz[hzID].decibles[dbID].hasPlayed) {\n         test[earID].hertz[hzID].decibles[dbID].hasPlayed = true;\n      }\n\n      // overall things to update\n      // current db numHeard +1\n      test[earID].hertz[hzID].decibles[dbID].numHeard += 1;\n\n      // check numHeard + numMissed to tell if repeat or move on\n      let numHeard = test[earID].hertz[hzID].decibles[dbID].numHeard;\n      let numMissed = test[earID].hertz[hzID].decibles[dbID].numMissed;\n      let totalPlayed = numHeard + numMissed;\n      let hitRate = Number((numHeard / totalPlayed).toFixed(2));\n\n      // if at lowest dB then jump to the next hz\n      if (totalPlayed >= 2 && hitRate > .65) {\n         test[earID].hertz[hzID].minThres = db; // set min thres before moving on\n\n         if (earID === 1 && test[earID].hertz[hzID].hzLevel === 500) {\n            this.setState({\n               isTestFinished: true\n            });\n         } else {\n            if (test[earID].hertz[hzID].hzLevel !== 500) { // change hz\n               hzID += 1;\n               db = 30;\n\n            } else if (test[earID].hertz[hzID].hzLevel === 500) { // change ears\n               earID = 1;\n               hzID = 0;\n               db = 30;\n\n            }\n         }\n\n      } else if (db === 20) { // edge case\n         db -= 5;\n      } else if (db - 10 >= 15) { // drop case\n         db -= 10;\n      }\n\n      this.setState({\n         test: test,\n         currentEarID: earID,\n         currentHzID: hzID,\n         activeEar: this.state.test[earID].ear,\n         activeHertz: this.state.test[earID].hertz[hzID].hzLevel,\n         activeDecible: db,\n         // disableYesNo: true\n      });\n   };\n\n   // when you click no\n   handleIncrease = () => {\n\n      let earID = this.state.currentEarID;\n      let hzID = this.state.currentHzID;\n      let db = this.state.activeDecible;\n      let dbID = this.getDecibleID(db);\n\n      // test object copy\n      let test = [...this.state.test];\n\n      // overall things to update\n      // current db numMissed +1\n      test[earID].hertz[hzID].decibles[dbID].numMissed += 1;\n\n      // check first time hz played and unable to hear\n      // !hear = update numOnlyNo \n      if (!test[earID].hertz[hzID].ableToHear && db < 70) {\n         test[earID].hertz[hzID].numOnlyNo += 1;\n         db += 10;\n      } else if (db === 75) {\n\n         if (test[earID].hertz[hzID].hzLevel !== 500) { // next hz\n            db = 30;\n            hzID += 1;\n\n         } else if (earID === 1 && test[earID].hertz[hzID].hzLevel === 500) { // end test\n            this.setState({\n               isTestFinished: true\n            });\n         } else { // switch ears\n            earID = 1;\n            hzID = 0;\n            db = 30;\n         }\n\n      } else {\n         db += 5;\n      }\n\n      this.setState({\n         test: test,\n         currentEarID: earID,\n         currentHzID: hzID,\n         activeEar: this.state.test[earID].ear,\n         activeHertz: this.state.test[earID].hertz[hzID].hzLevel,\n         activeDecible: db,\n         // disableYesNo: true\n      });\n   };\n\n   render() {\n      if (this.state.isTestFinished) {\n         return (\n            <main className=\"container\">\n               <div className=\"jumbotron bg-transparent\">\n                  <h3>Hearing Screening Complete!</h3>\n                  <p>Something about aknowledging this is a screening blah blah blah</p>\n                  <div className=\"form-check\">\n                     <input className=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"soundSet50\" onClick={() => { this.props.disable(); this.props.passResults(this.state.test); }} />\n                     <label className=\"form-check-label\" htmlFor=\"soundSet50\">\n                        I confirm above statement\n                     </label>\n                  </div>\n               </div>\n            </main>\n         );\n      } else {\n         return (\n            <main>\n               <div className=\"container text-center d-flex flex-column\">\n                  <ToneDisplay\n                     currentEar={this.state.activeEar} // passing current ear\n                     currentHZ={this.state.activeHertz} // passing current hz\n                     currentDB={this.state.activeDecible} // passing current db\n                     timeOut={this.handleDisableBtnWithAudio}\n                     isButtonDisabled={this.state.isButtonDisabled}\n                     checkClick={this.handleDisableBtnUntilTone}\n                  />\n                  <h4 className=\"font-weight-light py-2 m-0\">Do you hear this tone?</h4>\n                  <AudioResponse\n                     drop10={this.handleDrop} // passing drop function\n                     increase5={this.handleIncrease} // passing increase function\n                     isButtonDisabled={this.state.isButtonDisabled}\n                     hasTonePlayed={this.state.disableYesNo}\n                  />\n                  <WhatToDo />\n               </div>\n            </main>\n         );\n      }\n   }\n}\n\nclass ToneDisplay extends Component {\n   render() {\n      // using the passed hz/db to concat different parts together for file path name\n      let ear = this.props.currentEar;\n      let hz = this.props.currentHZ;\n      let db = this.props.currentDB;\n      let boop = (\"play\" + ear + hz + \"Hz\" + db);\n      let title = \"Right Ear - \";\n\n      if (ear === 'L') {\n         title = \"Left Ear - \";\n      }\n\n      return (\n         <div>\n            <h2>\n               {title + hz + \"Hz\"}\n            </h2>\n            <div className=\"d-flex justify-content-center\" >\n               <BoopButton\n                  boop={boop}\n                  clickDisable={this.props.timeOut}\n                  disabled={this.props.isButtonDisabled}\n                  hasClicked={this.props.checkClick}\n               />\n            </div>\n         </div>\n      );\n   }\n}\n\n\nclass AudioResponse extends Component {\n   render() {\n\n      return (\n         <div className=\"d-inline-flex justify-content-center\">\n            <div className=\"row py-2 mb-4 m-2 align-items-center\">\n               <div className=\"col\">\n                  <button type=\"button\" className=\"btn btn-dark text-nowrap screening-btn-hear\" disabled={this.props.isButtonDisabled || this.props.hasTonePlayed} onClick={this.props.increase5}>\n                     <h4 className=\"font-weight-light py-2 m-0\"><i className=\"bi bi-hand-thumbs-down text-black\"></i> No</h4>\n                  </button>\n\n               </div>\n\n               <div className=\"col\">\n\n                  <button type=\"button\" className=\"btn btn-info text-nowrap screening-btn-hear\" disabled={this.props.isButtonDisabled || this.props.hasTonePlayed} onClick={this.props.drop10}>\n                     <h4 className=\"font-weight-light py-2 m-0\"><i className=\"bi bi-hand-thumbs-up text-black\"></i> Yes</h4>\n                  </button>\n\n               </div>\n            </div>\n         </div>\n      );\n   }\n}\n\nfunction WhatToDo() {\n      return (\n         <div className=\"px-2\">\n            <button className=\"btn btn-transparent\" type=\"link\" id=\"informationPopover\">\n               <p className=\"mb-0 font-weight-light\"><i className=\"bi bi-info-circle text-info\"></i> What do I do?</p>\n            </button>\n            <UncontrolledPopover\n               placement=\"bottom\"\n               target=\"informationPopover\"\n            >\n               <PopoverBody className=\"font-weight-light shadow text-center\">\n                  <p className=\"m-0 p-0\">Click the play button to listen to the tone, “No” if you did not hear the sound and “Yes” if you did. If you want to stop your hearing screening and go back to the instructions, click the “restart” button. </p>\n               </PopoverBody>\n            </UncontrolledPopover>\n         </div>\n      );\n   \n}\n\nexport default Audio;"]},"metadata":{},"sourceType":"module"}